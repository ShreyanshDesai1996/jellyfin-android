define(["events","appSettings","filesystem"],(function(e,t,r){"use strict";return function(){var i,o=this;function n(){return Promise.resolve()}function u(t){if(t){var r={src:i};e.trigger(o,"stopped",[r])}i=null}o.name="External Player",o.type="mediaplayer",o.id="externalplayer",o.priority=-1,o.supportsProgress=!1,o.isLocalPlayer=!0,o.canPlayMediaType=function(e){return"Video"===e&&t.enableSystemExternalPlayers()},o.canPlayItem=function(e,t){return!!t.fullscreen},o.currentSrc=function(){return i},o.play=function(e){return function(e){var t=e.url,i=e.mediaSource;if(!i||"File"!==i.Protocol||t===i.Path)return Promise.resolve(t);var o="BluRay"===i.VideoType||"Dvd"===i.VideoType||"HdDvd"===i.VideoType?"directoryExists":"fileExists";return r[o](i.Path).then((function(){return i.Path}),(function(){return t}))}(e).then((function(e){return Promise.resolve()}))},o.setSubtitleStreamIndex=function(e){},o.canSetAudioStreamIndex=function(){return!1},o.setAudioStreamIndex=function(e){},o.currentTime=function(e){return null},o.duration=function(e){return null},o.stop=function(e,t){return n().then((function(){return u(t),Promise.resolve()}))},o.destroy=function(){n()},o.pause=function(){},o.unpause=function(){},o.paused=function(){return!1},o.volume=function(e){},o.setMute=function(e){},o.isMuted=function(){},o.getDeviceProfile=function(){return new Promise((function(e,r){require(["browserdeviceprofile"],(function(r){var i=t.maxStreamingBitrate(),o={};o.MaxStreamingBitrate=i,o.MaxStaticBitrate=1e8,o.MusicStreamingTranscodingBitrate=192e3,o.DirectPlayProfiles=[],o.DirectPlayProfiles.push({Container:"m4v,3gp,ts,mpegts,mov,xvid,vob,mkv,wmv,asf,ogm,ogv,m2v,avi,mpg,mpeg,mp4,webm,wtv,dvr-ms,iso",Type:"Video"}),o.DirectPlayProfiles.push({Container:"aac,mp3,mpa,wav,wma,mp2,ogg,oga,webma,ape,opus,flac",Type:"Audio"}),o.TranscodingProfiles=[],o.TranscodingProfiles.push({Container:"mkv",Type:"Video",AudioCodec:"aac,mp3,ac3",VideoCodec:"h264",Context:"Streaming"}),o.TranscodingProfiles.push({Container:"mp3",Type:"Audio",AudioCodec:"mp3",Context:"Streaming",Protocol:"http"}),o.ContainerProfiles=[],o.CodecProfiles=[],o.SubtitleProfiles=[],o.SubtitleProfiles.push({Format:"srt",Method:"Embed"}),o.SubtitleProfiles.push({Format:"subrip",Method:"Embed"}),o.SubtitleProfiles.push({Format:"ass",Method:"Embed"}),o.SubtitleProfiles.push({Format:"ssa",Method:"Embed"}),o.SubtitleProfiles.push({Format:"pgs",Method:"Embed"}),o.SubtitleProfiles.push({Format:"pgssub",Method:"Embed"}),o.SubtitleProfiles.push({Format:"dvdsub",Method:"Embed"}),o.SubtitleProfiles.push({Format:"vtt",Method:"Embed"}),o.SubtitleProfiles.push({Format:"sub",Method:"Embed"}),o.SubtitleProfiles.push({Format:"idx",Method:"Embed"}),o.SubtitleProfiles.push({Format:"smi",Method:"Embed"}),o.ResponseProfiles=[],e(o)}))}))}}}));